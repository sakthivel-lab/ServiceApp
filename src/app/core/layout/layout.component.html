<div class="layout-grid" [class.dark-theme]="darkMode">

  <!-- ================= HEADER ================= -->
  <header class="header">
    <mat-toolbar class="app-toolbar">

      <!-- LEFT SIDENAV TOGGLE -->
      <button mat-icon-button (click)="left.toggle()">
        <mat-icon>menu</mat-icon>
      </button>

      <!-- LOGO + TITLE -->
      <img src="assets/images/Sevagan_Logo.jpg" class="logo">
      <span class="title">My Company</span>

      <span class="spacer"></span>

      <!-- ===== DESKTOP ACTIONS ===== -->
      <ng-container *ngIf="isDesktop; else mobileMenu">

        <!-- Dark mode -->
        <mat-slide-toggle [checked]="themeService.isDark()" (change)="toggleDarkMode()">
        </mat-slide-toggle>

        <!-- more vertical menus -->
        <button mat-icon-button (click)="right.toggle()">
          <mat-icon>more_vert</mat-icon>
        </button>

        <!-- Notifications -->
        <button mat-icon-button>
          <mat-icon matBadge="3" matBadgeColor="warn">notifications</mat-icon>
        </button>

        <!-- Profile -->
        <button mat-button [matMenuTriggerFor]="profileMenu" class="profile-btn">
          <mat-icon>
            account_circle
          </mat-icon>
        </button>

      </ng-container>

      <!-- ===== MOBILE OVERFLOW MENU ===== -->
      <ng-template #mobileMenu>
        <button mat-icon-button [matMenuTriggerFor]="mobileActions">
          <mat-icon>more_vert</mat-icon>
        </button>
      </ng-template>

    </mat-toolbar>

  </header>

  <!-- PROFILE MENU -->
  <mat-menu #profileMenu="matMenu">

    <button mat-menu-item routerLink="/profile">
      <mat-icon>person</mat-icon>
      <span>Profile</span>
    </button>

    <button mat-menu-item routerLink="/customers">
      <mat-icon>settings</mat-icon>
      <span>Settings</span>
    </button>

    <button mat-menu-item routerLink="/logout">
      <mat-icon>logout</mat-icon>
      <span>Logout</span>
    </button>
  </mat-menu>


  <!-- MOBILE ACTION MENU -->
  <mat-menu #mobileActions="matMenu">
    <button mat-menu-item (click)="toggleDarkMode()">
      <mat-icon>dark_mode</mat-icon>
      Dark Mode
    </button>
    <button mat-menu-item>
      <mat-icon>notifications</mat-icon>
      Notifications
    </button>
    <button mat-menu-item [matMenuTriggerFor]="profileMenu">
      <mat-icon>person</mat-icon>
      Profile
    </button>
  </mat-menu>

  <!-- ================= BODY ================= -->
  <mat-sidenav-container class="body-container">

    <!-- LEFT SIDENAV -->
    <mat-sidenav #left [mode]="isDesktop ? 'side' : 'over'" [opened]="isDesktop" class="sidenav">
      <mat-nav-list>
        <a mat-list-item routerLink="/dashboard" routerLinkActive="active-link" style="color: white;">
          <mat-icon>dashboard</mat-icon>
          <span style="padding: 5px;">Dashboard</span>
        </a>
        <a mat-list-item routerLink="/customers" routerLinkActive="active-link" style="color: white;">
          <mat-icon>group</mat-icon>
          <span style="padding: 5px;">Customers</span>
        </a>
        <a mat-list-item routerLink="/inventory" routerLinkActive="active-link" style="color: white;">
          <mat-icon>inventory</mat-icon>
          <span style="padding: 5px;">Inventory</span>
        </a>
        <a mat-list-item routerLink="/service-requests" routerLinkActive="active-link" style="color: white;">
          <mat-icon>engineering</mat-icon>
          <span style="padding: 5px;">Service Details</span>
        </a>
        <a mat-list-item routerLink="/reports" routerLinkActive="active-link" style="color: white;">
          <mat-icon>bar_chart</mat-icon>
          <span style="padding: 5px;">Reports</span>
        </a>
      </mat-nav-list>
    </mat-sidenav>

    <!-- RIGHT SIDENAV -->
    <mat-sidenav #right position="end" [mode]="isDesktop ? 'side' : 'over'" [opened]="isDesktop" class="right-sidenav">
      <div class="sidenav-header">
        <h3 class="sidenav-title">Team Overview</h3>
        <p class="sidenav-subtitle">Real-time status updates</p>
      </div>

      <!-- Quick Stats -->
      <div class="quick-stats">
        <div class="stat-item">
          <div class="stat-number">4</div>
          <div class="stat-label">Online</div>
        </div>
        <div class="stat-item">
          <div class="stat-number">1</div>
          <div class="stat-label">Busy</div>
        </div>
        <div class="stat-item">
          <div class="stat-number">1</div>
          <div class="stat-label">Away</div>
        </div>
      </div>

      <!-- Engineer Status Card -->
      <mat-card class="engineer-status-card">
        <mat-card-header>
          <mat-card-title class="card-title">
            <mat-icon class="title-icon">people</mat-icon>
            Engineer Status
          </mat-card-title>
          <button mat-icon-button class="refresh-btn" (click)="refreshEngineers()">
            <mat-icon>refresh</mat-icon>
          </button>
        </mat-card-header>

        <div class="engineer-list">
          <div class="engineer-item">
            <div class="avatar-container">
              <img src="assets/avatar1.png" class="avatar" />
              <span class="status-indicator active"></span>
            </div>
            <div class="info">
              <div class="name">John Davidson</div>
              <div class="role">Field Engineer</div>
              <div class="location">üìç Downtown</div>
            </div>
            <span class="status active">Active</span>
          </div>

          <div class="engineer-item">
            <div class="avatar-container">
              <img src="assets/avatar2.png" class="avatar" />
              <span class="status-indicator available"></span>
            </div>
            <div class="info">
              <div class="name">Sarah Lee</div>
              <div class="role">Support Engineer</div>
              <div class="location">üìç Office</div>
            </div>
            <span class="status available">Available</span>
          </div>

          <div class="engineer-item">
            <div class="avatar-container">
              <img src="assets/avatar3.png" class="avatar" />
              <span class="status-indicator busy"></span>
            </div>
            <div class="info">
              <div class="name">Mike Roberts</div>
              <div class="role">Network Engineer</div>
              <div class="location">üìç Site A</div>
            </div>
            <span class="status busy">Busy</span>
          </div>

          <div class="engineer-item">
            <div class="avatar-container">
              <img src="assets/avatar4.png" class="avatar" />
              <span class="status-indicator away"></span>
            </div>
            <div class="info">
              <div class="name">Emily Watson</div>
              <div class="role">Service Engineer</div>
              <div class="location">üìç Remote</div>
            </div>
            <span class="status away">Away</span>
          </div>
        </div>

        <button mat-stroked-button class="manage-btn">
          <mat-icon class="btn-icon">settings</mat-icon>
          Manage Roster
        </button>
      </mat-card>

      <!-- Activity Feed -->
      <mat-card class="activity-card">
        <mat-card-header>
          <mat-card-title class="card-title">
            <mat-icon class="title-icon">activity</mat-icon>
            Recent Activity
          </mat-card-title>
        </mat-card-header>

        <div class="activity-list">
          <div class="activity-item">
            <div class="activity-icon">üîß</div>
            <div class="activity-content">
              <div class="activity-text">Service completed</div>
              <div class="activity-time">2 min ago</div>
            </div>
          </div>
          <div class="activity-item">
            <div class="activity-icon">üìã</div>
            <div class="activity-content">
              <div class="activity-text">New ticket assigned</div>
              <div class="activity-time">15 min ago</div>
            </div>
          </div>
          <div class="activity-item">
            <div class="activity-icon">‚ö†Ô∏è</div>
            <div class="activity-content">
              <div class="activity-text">Low stock alert</div>
              <div class="activity-time">1 hour ago</div>
            </div>
          </div>
        </div>
      </mat-card>
    </mat-sidenav>

    <!-- MAIN CONTENT -->
    <mat-sidenav-content class="content">
      <router-outlet></router-outlet>
    </mat-sidenav-content>

  </mat-sidenav-container>

  <!-- ================= FOOTER ================= -->
  <footer class="footer">
    ¬© 2026 My Company
  </footer>

</div>