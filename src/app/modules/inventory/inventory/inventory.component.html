<div class="inventory-management">
  <!-- Header Section -->
  <div class="inventory-header">
    <div class="header-content">
      <h1 class="page-title">Inventory Management</h1>
      <p class="page-subtitle">Monitor stock levels, manage parts, and track equipment usage.</p>
    </div>
    <button mat-raised-button color="primary" class="add-part-btn" (click)="addNewPart()">
      <mat-icon>add</mat-icon>
      Add New Part
    </button>
  </div>

  <!-- Stats Cards -->
  <div class="stats-container">
    <div class="stats-grid">
      <!-- Total Inventory Value -->
      <mat-card class="stat-card inventory-value">
        <div class="stat-content">
          <div class="stat-label">Total Inventory Value</div>
          <div class="stat-number">${{ totalInventoryValue | number:'1.0-0' }}</div>
          <div class="stat-change positive">
            <mat-icon class="change-icon">trending_up</mat-icon>
            +{{ inventoryGrowth }}% from last month
          </div>
        </div>
        <div class="stat-icon">
          <mat-icon>inventory_2</mat-icon>
        </div>
      </mat-card>

      <!-- Low Stock Items -->
      <mat-card class="stat-card low-stock-card">
        <div class="stat-content">
          <div class="stat-label">Low Stock Items</div>
          <div class="stat-number">{{ lowStockCount }}</div>
          <div class="stat-change warning">
            <mat-icon class="change-icon">warning</mat-icon>
            Requires immediate attention
          </div>
        </div>
        <div class="stat-icon">
          <mat-icon>warning</mat-icon>
        </div>
      </mat-card>

      <!-- Out of Stock -->
      <mat-card class="stat-card out-of-stock-card">
        <div class="stat-content">
          <div class="stat-label">Out of Stock</div>
          <div class="stat-number">{{ outOfStockCount }}</div>
          <div class="stat-change critical">
            <mat-icon class="change-icon">trending_up</mat-icon>
            2 new since yesterday
          </div>
        </div>
        <div class="stat-icon">
          <mat-icon>no_accounts</mat-icon>
        </div>
      </mat-card>

      <!-- Most Used Part -->
      <mat-card class="stat-card most-used-card">
        <div class="stat-content">
          <div class="stat-label">Most Used Part</div>
          <div class="stat-number most-used">{{ mostUsedPart }}</div>
          <div class="stat-change info">
            <mat-icon class="change-icon">info</mat-icon>
            Restock suggested soon
          </div>
        </div>
        <div class="stat-icon">
          <mat-icon>star</mat-icon>
        </div>
      </mat-card>
    </div>
  </div>

  <!-- Controls Section -->
  <div class="controls-section">
    <div class="search-filters">
      <mat-form-field appearance="outline" class="search-field">
        <mat-label>Search by SKU, Part Name...</mat-label>
        <input matInput (keyup)="onSearchChange($any($event).target.value)">
        <mat-icon matPrefix>search</mat-icon>
      </mat-form-field>

      <mat-form-field appearance="outline" class="category-select">
        <mat-label>All Categories</mat-label>
        <mat-select (selectionChange)="onCategoryChange($event.value)" [value]="selectedCategory">
          <mat-option value="all">All Categories</mat-option>
          <mat-option value="Electronics">Electronics</mat-option>
          <mat-option value="Wheels">Wheels</mat-option>
          <mat-option value="Brakes">Brakes</mat-option>
          <mat-option value="Accessories">Accessories</mat-option>
          <mat-option value="Cables">Cables</mat-option>
        </mat-select>
      </mat-form-field>

      <mat-form-field appearance="outline" class="status-select">
        <mat-label>All Status</mat-label>
        <mat-select (selectionChange)="onStatusChange($event.value)" [value]="selectedStatus">
          <mat-option value="all">All Status</mat-option>
          <mat-option value="in-stock">In Stock</mat-option>
          <mat-option value="low-stock">Low Stock</mat-option>
          <mat-option value="out-of-stock">Out of Stock</mat-option>
        </mat-select>
      </mat-form-field>

      <div class="toggle-filters">
        <!--<mat-slide-toggle (change)="onLowStockToggle($event.checked)" color="primary">
          Low Stock Only
        </mat-slide-toggle>
        <button mat-icon-button class="filters-btn" (click)="openFilters()">
          <mat-icon>tune</mat-icon>
          <span>Filters</span>
        </button> -->
        <button mat-icon-button class="export-btn" (click)="exportData()">
          <mat-icon>file_download</mat-icon>
          <span>Export</span>
        </button>
      </div>
    </div>
  </div>

  <!-- Table Section -->
  <div class="table-container">
    <table mat-table [dataSource]="dataSource" class="inventory-table">
      <!-- SKU Column -->
      <ng-container matColumnDef="sku">
        <th mat-header-cell *matHeaderCellDef>SKU</th>
        <td mat-cell *matCellDef="let element">
          <span class="sku-badge">{{ element.sku }}</span>
        </td>
      </ng-container>

      <!-- Part Name Column -->
      <ng-container matColumnDef="name">
        <th mat-header-cell *matHeaderCellDef>PART NAME</th>
        <td mat-cell *matCellDef="let element">{{ element.name }}</td>
      </ng-container>

      <!-- Category Column -->
      <ng-container matColumnDef="category">
        <th mat-header-cell *matHeaderCellDef>CATEGORY</th>
        <td mat-cell *matCellDef="let element">
          <span class="category-badge">{{ element.category }}</span>
        </td>
      </ng-container>

      <!-- Location Column -->
      <ng-container matColumnDef="location">
        <th mat-header-cell *matHeaderCellDef>LOCATION</th>
        <td mat-cell *matCellDef="let element">{{ element.location }}</td>
      </ng-container>

      <!-- Quantity Column -->
      <ng-container matColumnDef="quantity">
        <th mat-header-cell *matHeaderCellDef>QUANTITY</th>
        <td mat-cell *matCellDef="let element">
          <span class="quantity-controls">
            <button mat-icon-button class="qty-btn" disabled>
              <mat-icon>remove</mat-icon>
            </button>
            <span class="qty-value">{{ element.quantity }}</span>
            <button mat-icon-button class="qty-btn">
              <mat-icon>add</mat-icon>
            </button>
          </span>
        </td>
      </ng-container>

      <!-- Unit Price Column -->
      <ng-container matColumnDef="unitPrice">
        <th mat-header-cell *matHeaderCellDef>UNIT PRICE</th>
        <td mat-cell *matCellDef="let element">${{ element.unitPrice | number:'1.2-2' }}</td>
      </ng-container>

      <!-- Status Column -->
      <ng-container matColumnDef="status">
        <th mat-header-cell *matHeaderCellDef>STATUS</th>
        <td mat-cell *matCellDef="let element">
          <span class="status-badge" [ngClass]="getStatusColor(element.status)">
            <mat-icon *ngIf="element.status === 'in-stock'">check_circle</mat-icon>
            <mat-icon *ngIf="element.status === 'low-stock'">warning</mat-icon>
            <mat-icon *ngIf="element.status === 'out-of-stock'">cancel</mat-icon>
            {{ element.status | titlecase }}
          </span>
        </td>
      </ng-container>

      <!-- Actions Column -->
      <ng-container matColumnDef="actions">
        <th mat-header-cell *matHeaderCellDef>ACTIONS</th>
        <td mat-cell *matCellDef="let element">
          <button mat-icon-button [matMenuTriggerFor]="menu">
            <mat-icon>more_vert</mat-icon>
          </button>
          <mat-menu #menu="matMenu">
            <button mat-menu-item (click)="editPart(element)">
              <mat-icon>edit</mat-icon>
              <span>Edit</span>
            </button>
            <button mat-menu-item (click)="deletePart(element)">
              <mat-icon>delete</mat-icon>
              <span>Delete</span>
            </button>
          </mat-menu>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>

    <!-- Pagination -->
    <div class="pagination-container">
      <div class="pagination-info">
        Showing {{ currentPage * pageSize + 1 }} to {{ Math.min((currentPage + 1) * pageSize, totalItems) }} of {{ totalItems }} parts
      </div>
      <div class="pagination-controls">
        <button mat-icon-button [disabled]="currentPage === 0" (click)="currentPage = Math.max(0, currentPage - 1)">
          <mat-icon>chevron_left</mat-icon>
        </button>
        <button mat-mini-fab *ngFor="let page of [1, 2, 3]" 
          [class.active]="page - 1 === currentPage"
          (click)="currentPage = page - 1">
          {{ page }}
        </button>
        <span class="pagination-dots">...</span>
        <button mat-mini-fab (click)="currentPage = 23">24</button>
        <button mat-icon-button (click)="currentPage = Math.min(45, currentPage + 1)">
          <mat-icon>chevron_right</mat-icon>
        </button>
      </div>
    </div>
  </div>
</div>
